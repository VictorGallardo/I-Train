<ion-header>
  <ion-header class="ion-no-border">
    <ion-toolbar class="ion-text-center">
      <!-- Menu -->
      <ion-buttons slot="start">
        <ion-menu-button autoHide="false" menu="first"></ion-menu-button>
      </ion-buttons>
      <!-- Título -->
      <ion-title>{{item.title}}</ion-title>

      <!-- Icono info -->
      <ion-buttons slot="end">
        <ion-button>
          <ion-icon
            name="information-circle-outline"
            slot="icon-only"
          ></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>
</ion-header>

<ion-content class="ion-text-center">
  <h3>{{displayStage}}</h3>

  <ion-grid fixed>
    <ion-row>
      <ion-col class="ion-text-center">
        <svg
          id="progress-circle"
          width="40vh"
          height="40vh"
          viewBox="0 0 175 175"
        >
          <linearGradient id="linearColors1" x1="0" y1="0" x2="1" y2="1">
            <stop
              *ngIf="displayColor === 'restOut'"
              offset="0%"
              stop-color="#4DD3E3"
            ></stop>
            <stop
              *ngIf="displayColor === 'restOut'"
              offset="100%"
              stop-color="#7DCFFF"
            ></stop>
            <stop
              *ngIf="displayColor === 'Ex'"
              offset="0%"
              stop-color="#ff9368"
            ></stop>
            <stop
              *ngIf="displayColor === 'Ex'"
              offset="100%"
              stop-color="#FF412C"
            ></stop>
            <stop
              *ngIf="displayColor === 'Rest'"
              offset="0%"
              stop-color="#A4FCE5"
            ></stop>
            <stop
              *ngIf="displayColor === 'Rest'"
              offset="100%"
              stop-color="#85FF8B"
            ></stop>
          </linearGradient>
          <circle
            cx="50%"
            cy="50%"
            [attr.r]="circleR"
            fill="none"
            stroke="#34343C"
            stroke-width="14"
          />
          <circle
            cx="50%"
            cy="50%"
            [attr.r]="circleR"
            fill="none"
            stroke="#121213"
            stroke-width="12"
          />
          <circle
            cx="50%"
            cy="50%"
            [attr.r]="circleR"
            fill="none"
            stroke="url(#linearColors1)"
            stroke-width="9"
            stroke-linecap="round"
            [attr.stroke-dasharray]="circleDasharray"
            [attr.stroke-dashoffset]="percentageOffset(percent | async)"
          />
          <text x="50%" y="57%" class="timer-text">{{ time | async }}</text>
        </svg>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-card class="ion-padding">
    <ion-item>
      <ion-label>
        <h2>Descripción</h2>
        <p>{{item.description}}</p>
      </ion-label>
    </ion-item>
    <!-- <ion-grid fixed>
      <ion-row>
        <ion-col size="6">
          <ion-item>
            <ion-label position="stacked">Series</ion-label>
            <ion-label position="stacked">{{counterRestSets}}</ion-label>
          </ion-item>
        </ion-col>
        <ion-col size="6">
          <ion-item>
            <ion-label position="stacked">Repeticiones</ion-label>
            <ion-label position="stacked">{{counterRestReps}}</ion-label>
          </ion-item>
        </ion-col>
      </ion-row>
    </ion-grid> -->
  </ion-card>
</ion-content>

<ion-footer class="ion-padding">
  <ion-toolbar>
    <ion-button
      *ngIf="state === 'stop'"
      (click)="startPreparation(this.preparation)"
      color="itrain-blue"
      expand="block"
    >
      <ion-icon color="itrain-darkcream" name="play"></ion-icon>
    </ion-button>

    <ion-button
      *ngIf="state === 'start'"
      (click)="stopTimer()"
      color="itrain-red"
      expand="block"
    >
      <ion-icon
        *ngIf="state === 'start'"
        color="itrain-darkcream"
        name="stop"
      ></ion-icon>
    </ion-button>

    <!-- (click)="startTimer()" -->
    <!-- *ngIf="state === 'stop'" -->
    <!-- *ngIf="state === 'start'"  -->
    <!-- (click)="stopTimer()" -->
  </ion-toolbar>
</ion-footer>
